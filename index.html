
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>冷雨之家</title>
  <meta name="author" content="Spring">

  
  <meta name="description" content="Alcatraz Alcatraz是一款开源的用于Xcode7的包管理工具.Xcode8以及以后版本需要配合下面的工具来使用. update_xcode_plugins update_xcode_plugins可以为Xcode中安装的插件添加UUID, 同时还能够 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://douxinchun.github.io/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  
  <link href="/atom.xml" rel="alternate" title="冷雨之家" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>&#8211;>
  <!--<script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.min.js"></script>&#8211;>
  <!--为了添加scroll_to_top.html 提高了js的版本-->
  <script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.3.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts-->
<link href="/stylesheets/pt_serif.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/pt_sans.css" rel="stylesheet" type="text/css">
  

  <script>
  	function addBlankTargetForLinks () {
  	  $('a[href^="http"]').each(function(){
  		  $(this).attr('target', '_blank');
  	  });
  	}
  	$(document).bind('DOMNodeInserted', function(event) {
  	  addBlankTargetForLinks();
  	});
  </script>
</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/"><img style="border-radius:50%" src="/images/head.png" width=60 height=60 />
冷雨之家</a></h1>
  
    <h2>Dying is the day worth living for</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="douxinchun.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">博客</a></li>
  <li><a href="/blog/archives">归档</a></li>
  <li><a href="/aboutme">关于我</a></li>
  
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/20180918/tips-of-xcode.html">Xcode 使用技巧</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-09-18T17:03:09+08:00'><span class='date'>2018 年9 月18 日</span> <span class='time'>5:03 pm</span></time>
        
           | <a href="/blog/20180918/tips-of-xcode.html#disqus_thread"
             data-disqus-identifier="http://douxinchun.github.io/blog/20180918/tips-of-xcode.html">Comments</a>
        
		<!--
	    
		-->
      </p>
    
  </header>


  <div class="entry-content"><h2>Alcatraz</h2>

<p><a href="https://github.com/alcatraz/Alcatraz">Alcatraz</a>是一款开源的用于Xcode7的包管理工具.Xcode8以及以后版本需要配合下面的工具来使用.</p>

<h2>update_xcode_plugins</h2>

<p><a href="https://github.com/inket/update_xcode_plugins">update_xcode_plugins</a>可以为Xcode中安装的插件添加UUID, 同时还能够 为Xcode8以及以上的版本解除签名,这样就可以随心所欲的使用各种Xcode插件了.</p>

<h2>Reset Xcode’s “Load Bundles” warning</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>defaults delete com.apple.dt.Xcode DVTPlugInManagerNonApplePlugIns-Xcode-10.0
</span></code></pre></td></tr></table></div></figure>


<p>执行该命令,重启Xcode,可以使Xcode弹出&#8221;Load Bundles&#8221;的提示,可以重新load所有的插件.注意command末尾处的Xcode的版本号.</p>

<h2>添加删除行 快捷键 Opt+D</h2>

<ol>
<li><p>修改配置文件(plist)权限</p>

<pre><code class="ba&#39;sh">sudo chmod 666 /Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Resources/IDETextKeyBindingSet.plist
sudo chmod 777 /Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Resources/
</code></pre></li>
<li><p>打开plist文件进行修改</p>

<pre><code class="bash">open /Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Resources/IDETextKeyBindingSet.plist
</code></pre>

<p>找到<strong>root</strong>下的<strong>Deletions</strong>,在<strong>Deletions</strong>下添加一个Key: <strong>Delete Current Line</strong> 值为<strong>deleteToBeginningOfLine:, moveToEndOfLine:, deleteToBeginningOfLine:, deleteBackward:, moveDown:, moveToBeginningOfLine:</strong></p></li>
<li><p>重启Xcode,设置快捷键</p></li>
</ol>


<p>   <strong>Preference</strong> -> <strong>Key Bindings</strong> ,找到 <strong>Delete Current Line</strong> 选项,设置快捷键为 <strong>Opt+D</strong></p>

<h2>Xcode Release Build 版本号自动增加</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="nv">$CONFIGURATION</span> <span class="o">==</span> Release <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Bumping build number...&quot;</span>
</span><span class='line'><span class="nv">plist</span><span class="o">=</span><span class="k">${</span><span class="nv">PROJECT_DIR</span><span class="k">}</span>/<span class="k">${</span><span class="nv">INFOPLIST_FILE</span><span class="k">}</span>
</span><span class='line'>
</span><span class='line'><span class="nv">buildnum</span><span class="o">=</span><span class="k">$(</span>/usr/libexec/PlistBuddy -c <span class="s2">&quot;Print CFBundleVersion&quot;</span> <span class="s2">&quot;${plist}&quot;</span><span class="k">)</span>
</span><span class='line'><span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;${buildnum}&quot;</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;No build number in $plist&quot;</span>
</span><span class='line'><span class="nb">exit </span>2
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="nv">buildnum</span><span class="o">=</span><span class="k">$(</span>expr <span class="nv">$buildnum</span> + 1<span class="k">)</span>
</span><span class='line'>/usr/libexec/Plistbuddy -c <span class="s2">&quot;Set CFBundleVersion $buildnum&quot;</span> <span class="s2">&quot;${plist}&quot;</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Bumped build number to $buildnum&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="nb">echo</span> <span class="nv">$CONFIGURATION</span> <span class="s2">&quot; build - Not bumping build number.&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>使用方法 Xcode&ndash;>Projet&ndash;>Target&ndash;>Build Phases&ndash;>&ldquo;+&rdquo;&ndash;>New Run Script Phase. 顺序放在Target Dependencies之后即可,尽量靠前.</p>

<p>过程, 查找 Info.plist 文件的位置,使用工具 /usr/libexec/PlistBuddy 读取 CFBundleVersion 的值,+1后再写会 Info.plist 文件.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/20180725/introduction-to-lipo.html">Lipo 使用简介</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-07-25T17:25:25+08:00'><span class='date'>2018 年7 月25 日</span> <span class='time'>5:25 pm</span></time>
        
           | <a href="/blog/20180725/introduction-to-lipo.html#disqus_thread"
             data-disqus-identifier="http://douxinchun.github.io/blog/20180725/introduction-to-lipo.html">Comments</a>
        
		<!--
	    
		-->
      </p>
    
  </header>


  <div class="entry-content"><p>最近在开发iOS SDK, 需要使用到lipo命令, 在此简单做一下记录:</p>

<p>lipo的使用手册</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  ~  man lipo
</span><span class='line'>
</span><span class='line'>LIPO<span class="o">(</span>1<span class="o">)</span>                                                                     LIPO<span class="o">(</span>1<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>NAME
</span><span class='line'>       lipo - create or operate on universal files
</span><span class='line'>
</span><span class='line'>SYNOPSIS
</span><span class='line'>       lipo   <span class="o">[</span>-info<span class="o">]</span>   <span class="o">[</span>-detailed_info<span class="o">]</span>   <span class="o">[</span>-arch   arch_type  input_file<span class="o">]</span>  ...   <span class="o">[</span>
</span><span class='line'>       input_file<span class="o">]</span>  ...   <span class="o">[</span>-arch_blank  arch_type<span class="o">]</span>  <span class="o">[</span>-create<span class="o">]</span>   <span class="o">[</span>-thin   arch_type<span class="o">]</span>
</span><span class='line'>       <span class="o">[</span>-replace  arch_type  filename<span class="o">]</span>  ...   <span class="o">[</span>-remove  arch_type<span class="o">]</span>  ...lio   <span class="o">[</span>-extract
</span><span class='line'>       arch_type<span class="o">]</span> ...  <span class="o">[</span>-extract_family  arch_type<span class="o">]</span>  ...   <span class="o">[</span>-verify_arch  arch_type
</span><span class='line'>       ...<span class="o">]</span>  <span class="o">[</span>-output output_file<span class="o">]</span> <span class="o">[</span>-segalign arch_type value<span class="o">]</span> ...
</span><span class='line'>
</span><span class='line'>DESCRIPTION
</span><span class='line'>       The  lipo  <span class="nb">command </span>creates or operates on <span class="sb">``</span>universal<span class="s1">&#39;&#39;</span> <span class="o">(</span>multi-architecture<span class="o">)</span>
</span><span class='line'>       files.  It only ever produces one output file, and never  alters  the  input
</span><span class='line'>       file.  The operations that lipo performs are: listing the architecture types
</span><span class='line'>       in a universal file<span class="p">;</span> creating a single universal file from one or more input
</span><span class='line'>       files<span class="p">;</span>  thinning  out  a single universal file to one specified architecture
</span><span class='line'>       <span class="nb">type</span><span class="p">;</span> and extracting, replacing, and/or removing  architectures  types  from
</span><span class='line'>       the input file to create a single new universal output file.
</span><span class='line'>
</span><span class='line'>       Only  one option can be specified, with the exception of -arch, -arch_blank,
</span><span class='line'>       -output, and -segalign, which are used in combination  with  other  options.
</span><span class='line'>       The input_file argument is required, and only the -create option allows more
</span><span class='line'>       than one input_file to be specified.  The -output flag must be used,  except
</span><span class='line'>       with the -info and -detailed_info flags.
</span><span class='line'>
</span><span class='line'>       The  arch_type  arguments  may  be  any  of the supported architecture names
</span><span class='line'>       listed in the man page arch<span class="o">(</span>3<span class="o">)</span>.
</span></code></pre></td></tr></table></div></figure>


<p>简单说,lipo就是用来操作universal file的命令,也可以说成是 fat file(因为这种文件确实比较大).在iOS中其实就是用来操作静态链接库(以.a为后缀的文件 )的命令.</p>

<p>fat file一般是指包含两种及以上CPU架构的静态链接库</p>

<p>lipo命令的功能:</p>

<ul>
<li>列举 .a文件 支持的architecture types.(架构类型,eg: armv7, armv7s, i386, x86_64, arm64)</li>
<li>合并多个 .a文件为一个.a文件</li>
<li>给一个 .a文件 瘦身.(剔除某一项CPU的架构类型)</li>
<li>提取, 替换或者移除 .a文件 文件中的某种架构</li>
</ul>


<p>使用lipo命令的注意事项</p>

<ul>
<li>除了 -arch, -arch_black, -output, -segalign选项外,其余的选项只能指定一个. 这几个选选项需要和其它的选项混合使用</li>
<li>除了 -create 选项外, 其余的选项只能指定一个input file作为参数</li>
<li>除了 -info 和 - detailed_info 选项外, 其余的选项必须指定 -output, 可以简写为 -o</li>
</ul>


<h3>lipo命令的使用eg,以WechatSDK 1.8.2作为举例对象</h3>

<h4>1.查看.a文件支持的CPU架构</h4>

<blockquote><p>lipo -info <em>input_file</em></p>

<p>lipo -detailed_info <em>input_file</em></p></blockquote>

<pre><code class="bash">➜  workspace lipo -info libWeChatSDK.a 
Architectures in the .a文件: libWeChatSDK.a are: i386 armv7 armv7s x86_64 arm64 

➜  workspace lipo -detailed_info libWeChatSDK.a
Fat header in: libWeChatSDK.a
fat_magic 0xcafebabe
nfat_arch 5
architecture i386
    cputype CPU_TYPE_I386
    cpusubtype CPU_SUBTYPE_I386_ALL
    offset 108
    size 3247680
    align 2^2 (4)
architecture armv7
    cputype CPU_TYPE_ARM
    cpusubtype CPU_SUBTYPE_ARM_V7
    offset 3247788
    size 3256064
    align 2^2 (4)
architecture armv7s
    cputype CPU_TYPE_ARM
    cpusubtype CPU_SUBTYPE_ARM_V7S
    offset 6503852
    size 3255048
    align 2^2 (4)
architecture x86_64
    cputype CPU_TYPE_X86_64
    cpusubtype CPU_SUBTYPE_X86_64_ALL
    offset 9758904
    size 3363856
    align 2^3 (8)
architecture arm64
    cputype CPU_TYPE_ARM64
    cpusubtype CPU_SUBTYPE_ARM64_ALL
    offset 13122760
    size 3704912
    align 2^3 (8)
➜  workspace 
</code></pre>

<h4>2..a文件 CPU架构拆分</h4>

<blockquote><p>lipo 静态库源文件路径 -thin CPU架构名称 -output 拆分后文件存放路径</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  workspace lipo -info libWeChatSDK-armv7
</span><span class='line'>input file libWeChatSDK-armv7 is not a fat file
</span><span class='line'>Non-fat file: libWeChatSDK-armv7 is architecture: armv7
</span></code></pre></td></tr></table></div></figure>


<h4>3.合并两个 .a文件s</h4>

<blockquote><p>lipo -create 静态库存放路径1  静态库存放路径2 &hellip;  -output 整合后存放的路径</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  workspace lipo -create libWeChatSDK-armv7 libWeChatSDK-i386 -o libWeChatSDK-i386+armv7
</span><span class='line'>➜  workspace lipo -info libWeChatSDK-i386+armv7
</span><span class='line'>Architectures in the fat file: libWeChatSDK-i386+armv7 are: armv7 i386
</span><span class='line'>➜  workspace
</span><span class='line'>
</span><span class='line'>➜  workspace lipo -create libWeChatSDK.a TYRZSD.a -o combine-library.a
</span><span class='line'>fatal error: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/lipo: libWeChatSDK.a and TYRZSD.a have the same architectures <span class="o">(</span>i386<span class="o">)</span> and can<span class="err">&#39;</span>t be in the same fat output file
</span></code></pre></td></tr></table></div></figure>


<p>这里需要注意一下,如果要合并的两个.a 文件含有相同的架构的话,会报如上的错误. 这种情况下怎么合并,可参照下一个章节</p>

<h4>4.用 lipo 删除某些平台</h4>

<blockquote><p>$ lipo input_file -remove i386 -output output_file</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  workspace lipo libWeChatSDK.a -remove i386 -o libWeChatSDK-noi386
</span><span class='line'>➜  workspace lipo -info libWeChatSDK-noi386
</span><span class='line'>Architectures in the fat file: libWeChatSDK-noi386 are: armv7 armv7s x86_64 arm64
</span></code></pre></td></tr></table></div></figure>


<h3>lipo命令合并.a文件, detail</h3>

<h4>1.分离出上述不同 .a 文件单独支持的架构版本，比如上述 libWeChatSDK.a 和 TYRZSD.a 支持 armv7 armv7s i386 x86_64 arm64，那么就需要分离出单独支持armv7 armv7s i386 x86_64 arm64的 .a 文件</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  workspace lipo libWeChatSDK.a -thin armv7 -o libWeChatSDK-armv7
</span><span class='line'>➜  workspace lipo TYRZSD.a -thin armv7 -o TYRZSD-armv7
</span></code></pre></td></tr></table></div></figure>


<h4>2.分离出.a库的目标文件（.o)</h4>

<blockquote><p> ar -x 静态链接库</p></blockquote>

<p>因为 .a 库分离出来的目标文件 .o  会很多, 所以, 最好是在工作空间根据不同的CPU建立不同的文件夹</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  workspace mkdir armv7
</span><span class='line'>➜  workspace <span class="nb">cd </span>armv7
</span><span class='line'>➜  armv7
</span><span class='line'>➜  armv7 ar -x ../libWeChatSDK-armv7
</span><span class='line'>➜  armv7 ls
</span><span class='line'>AppCommunicate.o          MTAPlugin.o               OpenUDID.o
</span><span class='line'>AppCommunicateData.o      MTAPluginIDFA.o           WXApi.o
</span><span class='line'>GCDAsyncSocket.o          MTAPluginInstall.o        WXApiObject.o
</span><span class='line'>MTA.o                     MTAPluginNotify.o         WXLogUtil.o
</span><span class='line'>MTABaseFunction.o         MTAReachability.o         WapAuthHandler.o
</span><span class='line'>MTAConfig.o               MTASendItem.o             WeChatApiUtil.o
</span><span class='line'>MTADataConfigHolder.o     MTASocket.o               WeChatRegister.o
</span><span class='line'>MTAEnv.o                  MTASpeedTestPlugin.o      WechatAuthSDK.o
</span><span class='line'>MTAEvent.o                MTAStore.o                __.SYMDEF
</span><span class='line'>MTAExtStoragePlugin.o     MTATempID.o               base64.o
</span><span class='line'>MTAHelper.o               MTAWX.o
</span><span class='line'>MTAMidPlugin.o            NSMutableArray+MTAQueue.o
</span><span class='line'>➜  armv7 ar -x ../TYRZSD-armv7
</span><span class='line'>➜  armv7 ls
</span><span class='line'>AppCommunicate.o          MTAReachability.o         UAOpenInfo.o
</span><span class='line'>AppCommunicateData.o      MTASendItem.o             UASession.o
</span><span class='line'>GCDAsyncSocket.o          MTASocket.o               UATimer.o
</span><span class='line'>MTA.o                     MTASpeedTestPlugin.o      UAUtil.o
</span><span class='line'>MTABaseFunction.o         MTAStore.o                WXApi.o
</span><span class='line'>MTAConfig.o               MTATempID.o               WXApiObject.o
</span><span class='line'>MTADataConfigHolder.o     MTAWX.o                   WXLogUtil.o
</span><span class='line'>MTAEnv.o                  NSMutableArray+MTAQueue.o WapAuthHandler.o
</span><span class='line'>MTAEvent.o                OpenUDID.o                WeChatApiUtil.o
</span><span class='line'>MTAExtStoragePlugin.o     TYRZSDK.o                 WeChatRegister.o
</span><span class='line'>MTAHelper.o               TYRZSDK_vers.o            WechatAuthSDK.o
</span><span class='line'>MTAMidPlugin.o            UAAuthViewController.o    __.SYMDEF
</span><span class='line'>MTAPlugin.o               UACrypto.o                __.SYMDEF SORTED
</span><span class='line'>MTAPluginIDFA.o           UAHTTP.o                  base64.o
</span><span class='line'>MTAPluginInstall.o        UALogReport.o
</span><span class='line'>MTAPluginNotify.o         UANetwork.o
</span></code></pre></td></tr></table></div></figure>


<h4>3.对支持同个架构的.o文件，进行合并成静态库。</h4>

<blockquote><p>libtool -static -o output_file *.o</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  armv7 libtool -static -o ../combine-library-armv7 *.o
</span><span class='line'>➜  armv7 ls ..
</span><span class='line'>TYRZSD-armv7          armv7                 libWeChatSDK-armv7    libWeChatSDK.a
</span><span class='line'>TYRZSD.a              combine-library-armv7 libWeChatSDK-i386
</span><span class='line'>➜  armv7
</span></code></pre></td></tr></table></div></figure>


<h4>4.合成支持全部架构的通用静态库</h4>

<p>如果之前的步骤不出错, 就会得到5个.a文件; combine-library-armv7 combine-library-armv7s combine-library-i386 combine-library-x86_64 combine-library-arm64</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  workspace lipo -create combine-library-armv7 combine-library-armv7s combine-library-i386 combine-library-x86_64 combine-library-arm64 -o combine-library
</span></code></pre></td></tr></table></div></figure>


<p>​    combine-library 就是最终需要的 .a 库</p>

<h3>参考链接</h3>

<p><a href="https://blog.csdn.net/qq_26968709/article/details/51164104">合并多个.a文件</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/20180718/rsa-key-structuress.html">秘钥格式 证书</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-07-18T17:17:34+08:00'><span class='date'>2018 年7 月18 日</span> <span class='time'>5:17 pm</span></time>
        
           | <a href="/blog/20180718/rsa-key-structuress.html#disqus_thread"
             data-disqus-identifier="http://douxinchun.github.io/blog/20180718/rsa-key-structuress.html">Comments</a>
        
		<!--
	    
		-->
      </p>
    
  </header>


  <div class="entry-content"><p>RSA秘钥存储一般有两种格式</p>

<ul>
<li>DER</li>
<li>PEM</li>
</ul>


<h3>DER</h3>

<p> DER: Distinguished Encoding Rules(可辨别编码规则)，是ASN.1的一种。
 ASN.1: Abstract Syntax Notation One(抽象语法标记)，ASN.1是一种 ISO/ITU-T 标准，描述了一种对数据进行表示、编码、传输和解码的数据格式。它提供了一整套正规的格式用于描述对象的结构，而不管语言上如何执行及这些数据的具体指代，也不用去管到底是什么样的应用程序。
证书信息一般以二进制的DER格式存储在文件中以供RSA，SSL使用。</p>

<h3>PEM ( Privacy Enhanced Mail )</h3>

<p>DER一般是二进制文件形式存储，打印性较差，因此对DER内容进行base64编码，并补充说明key类型的头和尾就构成了PEM</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-----BEGIN PUBLIC KEY-----
</span><span class='line'>MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDMYfnvWtC8Id5bPKae5yXSxQTt
</span><span class='line'>+Zpul6AnnZWfI2TtIarvjHBFUtXRo96y7hoL4VWOPKGCsRqMFDkrbeUjRrx8iL91
</span><span class='line'>4/srnyf6sh9c8Zk04xEOpK1ypvBz+Ks4uZObtjnnitf0NBGdjMKxveTq+VE7BWUI
</span><span class='line'>yQjtQ8mbDOsiLLvh7wIDAQAB
</span><span class='line'>-----END PUBLIC KEY-----</span></code></pre></td></tr></table></div></figure>


<p>因此PEM,DER实质内容是相同的。</p>

<blockquote><p>上面提到key以一定的结构存储的，不同的结构，补充的元信息也不同主要有两种组织形式PKCS#1,PKCS#8</p></blockquote>

<h3>PEM的简单介绍</h3>

<p>PEM全称是Privacy Enhanced     ，该标准定义了加密一个准备要发送邮件的标准 。它的基本流程是这样的：</p>

<ol>
<li><p>信息转换为ASCII码或其它编码方式；  </p></li>
<li><p>使用对称算法加密转换了的邮件信息；  </p></li>
<li><p>使用BASE64对加密后的邮件信息进行编码；  </p></li>
<li><p>使用一些头定义对信息进行封装，这些头信息格式如下（不一定都需要，可选的 ）：    </p>

<blockquote><p>Proc-Type,4:ENCRYPTED   <br/>
 DEK-Info: cipher-name, ivec    </p></blockquote>

<p>其中，第一个头信息标注了该文件是否进行了加密，该头信息可能的值包括ENCRY PTED(信息已经加密和签名)、MIC-ONLY(信息经过数字签名但没有加密)、MIC-CLEAR(信 息经过数字签名但是没有加密、也没有进行编码，可使用非PEM格式阅读)以及CLEAR(信 息没有签名和加密并且没有进行编码，该项好象是openssl自身的扩展，但是并没有真正 实现)；；第二个头信息标注了加密的算法以及使用的ivec参量，ivec其实在这儿提供的 应该是一个随机产生的数据序列，与块加密算法中要使用到的初始化变量（IV）不一样 。  </p></li>
<li><p>在这些信息的前面加上如下形式头标注信息：  </p>

<p> &mdash;&ndash;BEGIN PRIVACY-ENHANCED MESSAGE&mdash;&ndash;  </p>

<p> 在这些信息的后面加上如下形式尾标注信息：  </p>

<p>&mdash;&ndash;END PRIVACY-ENHANCED MESSAGE&mdash;&ndash;  </p></li>
</ol>


<p>上面是openssl的PEM文件的基本结构，需要注意的是，Openssl并没有实现PEM的全 部标准，它只是对openssl中需要使用的一些选项做了实现，详细的PEM格式，请参考RF C1421－1424。  </p>

<p>   下面是一个PEM编码的经过加密的DSA私钥的例子：  </p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-----BEGIN DSA PRIVATE KEY-----     
</span><span class='line'>Proc-Type: 4,ENCRYPTED     
</span><span class='line'>DEK-Info: DES-EDE3-CBC,F80EEEBEEA7386C4     
</span><span class='line'>BASE64 ENCODED DATA
</span><span class='line'>-----END DSA PRIVATE KEY-----   </span></code></pre></td></tr></table></div></figure>


<p>     有时候PEM编码的东西并没有经过加密，只是简单进行了BASE64编码，下面是一个没 有加密的证书请求的例子：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-----BEGIN CERTIFICATE REQUEST-----     
</span><span class='line'>BASE64 ENCODED DATA
</span><span class='line'>-----END CERTIFICATE REQUEST----- </span></code></pre></td></tr></table></div></figure>


<p>    可以看到，该文件没有了前面两个头信息。大家如果经常使用openssl的应用程序， 就对这些文件格式很熟悉了。</p>

<h3>PKCS#1</h3>

<p>PKCS#1结构仅为RSA设计</p>

<ul>
<li>PEM形式</li>
</ul>


<p>PublicKey</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-----BEGIN RSA PUBLIC KEY-----
</span><span class='line'>BASE64 ENCODED DATA
</span><span class='line'>-----END RSA PUBLIC KEY-----</span></code></pre></td></tr></table></div></figure>


<p>PrivateKey</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-----BEGIN RSA PRIVATE KEY-----
</span><span class='line'>BASE64 ENCODED DATA
</span><span class='line'>-----END RSA PRIVATE KEY-----</span></code></pre></td></tr></table></div></figure>


<ul>
<li>DER的结构</li>
</ul>


<p>PublicKey</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>RSAPublicKey ::= SEQUENCE {
</span><span class='line'>modulus           INTEGER,  -- n
</span><span class='line'>publicExponent    INTEGER   -- e
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>PrivateKey</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>RSAPrivateKey ::= SEQUENCE {
</span><span class='line'>version           Version,
</span><span class='line'>modulus           INTEGER,  -- n
</span><span class='line'>publicExponent    INTEGER,  -- e
</span><span class='line'>privateExponent   INTEGER,  -- d
</span><span class='line'>prime1            INTEGER,  -- p
</span><span class='line'>prime2            INTEGER,  -- q
</span><span class='line'>exponent1         INTEGER,  -- d mod (p-1)
</span><span class='line'>exponent2         INTEGER,  -- d mod (q-1)
</span><span class='line'>coefficient       INTEGER,  -- (inverse of q) mod p
</span><span class='line'>otherPrimeInfos   OtherPrimeInfos OPTIONAL
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h3>PKCS#8</h3>

<p>X509,SSL支持的算法不仅仅是RSA，因此产生了更具有通用性的PKCS#8</p>

<ul>
<li>PEM</li>
</ul>


<p>PublicKey</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-----BEGIN PUBLIC KEY-----
</span><span class='line'>BASE64 ENCODED DATA
</span><span class='line'>-----END PUBLIC KEY-----</span></code></pre></td></tr></table></div></figure>


<p>PrivateKey</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-----BEGIN PRIVATE KEY-----
</span><span class='line'>BASE64 ENCODED DATA
</span><span class='line'>-----END PRIVATE KEY-----</span></code></pre></td></tr></table></div></figure>


<ul>
<li>DER</li>
</ul>


<p>PublicKey</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>PublicKeyInfo ::= SEQUENCE {
</span><span class='line'>    algorithm       AlgorithmIdentifier,
</span><span class='line'>    PublicKey       BIT STRING
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>AlgorithmIdentifier ::= SEQUENCE {
</span><span class='line'>    algorithm       OBJECT IDENTIFIER,
</span><span class='line'>    parameters      ANY DEFINED BY algorithm OPTIONAL
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>RSA公钥的OID 为 1.2.840.113549.1.1.1</p>

<p>PrivateKey</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>PrivateKeyInfo ::= SEQUENCE {
</span><span class='line'>    version         Version,
</span><span class='line'>    algorithm       AlgorithmIdentifier,
</span><span class='line'>    PrivateKey      BIT STRING
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>AlgorithmIdentifier ::= SEQUENCE {
</span><span class='line'>    algorithm       OBJECT IDENTIFIER,
</span><span class='line'>    parameters      ANY DEFINED BY algorithm OPTIONAL
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>RSA私钥的OID 为 1.2.840.113549.1.1.1</p>

<p>与PKCS#1相比将文件包含的加密算法和Key分开存储，因此可以存储其他加密算法的Key</p>

<h3>SSL</h3>

<p><strong>SSL</strong> - Secure Sockets Layer,现在应该叫&#8221;TLS&#8221;,但由于习惯问题,我们还是叫&#8221;SSL&#8221;比较多.http协议默认情况下是不加密内容的,这样就很可能在内容传播的时候被别人监听到,对于安全性要求较高的场合,必须要加密,https就是带加密的http协议,而https的加密是基于SSL的,它执行的是一个比较下层的加密,也就是说,在加密前,你的服务器程序在干嘛,加密后也一样在干嘛,不用动,这个加密对用户和开发者来说都是透明的.More:[<a href="http://en.wikipedia.org/wiki/Transport_Layer_Security">维基百科</a>]</p>

<p><strong>OpenSSL</strong> - 简单地说,OpenSSL是SSL的一个实现,SSL只是一种规范.理论上来说,SSL这种规范是安全的,目前的技术水平很难破解,但SSL的实现就可能有些漏洞,如著名的&#8221;心脏出血&#8221;.OpenSSL还提供了一大堆强大的工具软件,强大到90%我们都用不到.</p>

<h3>证书标准</h3>

<p><strong>X.509</strong> - 这是一种证书标准,主要定义了证书中应该包含哪些内容.其详情可以参考RFC5280,SSL使用的就是这种证书标准.</p>

<h3>相关的文件扩展名</h3>

<p>这是比较误导人的地方,虽然我们已经知道有PEM和DER这两种编码格式,但文件扩展名并不一定就叫&#8221;PEM&#8221;或者&#8221;DER&#8221;,常见的扩展名除了PEM和DER还有以下这些,它们除了编码格式可能不同之外,内容也有差别,但大多数都能相互转换编码格式.</p>

<p><strong>CRT</strong> - CRT应该是certificate的三个字母,其实还是证书的意思,常见于*NIX系统,有可能是PEM编码,也有可能是DER编码,大多数应该是PEM编码,相信你已经知道怎么辨别.</p>

<p><strong>CER</strong> - 还是certificate,还是证书,常见于Windows系统,同样的,可能是PEM编码,也可能是DER编码,大多数应该是DER编码.</p>

<p><strong>KEY</strong> - 通常用来存放一个公钥或者私钥,并非X.509证书,编码同样的,可能是PEM,也可能是DER.
查看KEY的办法: openssl rsa -in mykey.key -text -noout
如果是DER格式的话,同理应该这样了: openssl rsa -in mykey.key -text -noout <strong>-inform der</strong></p>

<p><strong>CSR</strong> - Certificate Signing Request,即证书签名请求,这个并不是证书,而是向权威证书颁发机构获得签名证书的申请,其核心内容是一个公钥(当然还附带了一些别的信息),在生成这个申请的时候,同时也会生成一个私钥,私钥要自己保管好.做过iOS APP的朋友都应该知道是怎么向苹果申请开发者证书的吧.
查看的办法: openssl req -noout -text -in my.csr (如果是DER格式的话照旧加上-inform der,这里不写了)</p>

<p><strong>PFX/P12</strong> - predecessor of PKCS#12,对*nix服务器来说,一般CRT和KEY是分开存放在不同文件中的,但Windows的IIS则将它们存在一个PFX文件中,(因此这个文件包含了证书及私钥)这样会不会不安全？应该不会,PFX通常会有一个&#8221;提取密码&#8221;,你想把里面的东西读取出来的话,它就要求你提供提取密码,PFX使用的时DER编码,如何把PFX转换为PEM编码？
openssl pkcs12 -in for-iis.pfx -out for-iis.pem -nodes
这个时候会提示你输入提取代码. for-iis.pem就是可读的文本.
生成pfx的命令类似这样:openssl pkcs12 -export -in certificate.crt -inkey privateKey.key -out certificate.pfx -certfile CACert.crt</p>

<p>其中CACert.crt是CA(权威证书颁发机构)的根证书,有的话也通过-certfile参数一起带进去.这么看来,PFX其实是个证书密钥库.</p>

<p><strong>JKS</strong> - 即Java Key Storage,这是Java的专利,跟OpenSSL关系不大,利用Java的一个叫&#8221;keytool&#8221;的工具,可以将PFX转为JKS,当然了,keytool也能直接生成JKS,不过在此就不多表了.</p>

<h3>证书编码的转换</h3>

<p><strong>PEM转为DER</strong> openssl x509 -in cert.crt -outform der -out cert.der</p>

<p><strong>DER转为PEM</strong> openssl x509 -in cert.crt -inform der -outform pem -out cert.pem</p>

<p>(提示:要转换KEY文件也类似,只不过把x509换成rsa,要转CSR的话,把x509换成req&hellip;)</p>

<h3>使用openssl生成秘钥</h3>

<p>生成2048位RSA秘钥，使用3des加密秘钥文件private.pem</p>

<blockquote><p>openssl genrsa -des3 -out private.pem 2048</p></blockquote>

<p>导出公钥，默认为PKCS#8结构</p>

<blockquote><p>openssl rsa -in private.pem -outform PEM -pubout -out public.pem</p></blockquote>

<p>导出PKCS#1结构的公钥，注意openssl版本，老版本可能不支持</p>

<blockquote><p>openssl rsa -in private.pem -outform DER <strong>-RSAPublicKey_out</strong> -out public_pcks1.cer</p></blockquote>

<p>导出无加密保护的私钥</p>

<blockquote><p>openssl rsa -in private.pem -out private_unencrypted.pem -outform PEM</p></blockquote>

<h3>参考资料</h3>

<p><a href="https://medium.com/@oyrxx/rsa%E7%A7%98%E9%92%A5%E4%BB%8B%E7%BB%8D%E5%8F%8Aopenssl%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4-d3fcc689513f">秘钥格式</a></p>

<p><a href="https://tls.mbed.org/kb/cryptography/asn1-key-structures-in-der-and-pem">ASN.1 key structures in DER and PEM</a></p>

<p><a href="https://www.cnblogs.com/guogangj/p/4118605.html">[那些证书相关的玩意儿(SSL,X.509,PEM,DER,CRT,CER,KEY,CSR,P12等)](https://www.cnblogs.com/guogangj/p/4118605.html)</a></p>

<p><a href="https://groups.google.com/forum/#!topic/cn.bbs.comp.security/90Z0inkJ3lo">openssl之PEM系列之1&mdash;PEM编码文件结构介绍</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/20180718/generate-rsa-key-on-mac-os-x.html">Mac OS X 下生成RSA密钥对</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-07-18T15:15:18+08:00'><span class='date'>2018 年7 月18 日</span> <span class='time'>3:15 pm</span></time>
        
           | <a href="/blog/20180718/generate-rsa-key-on-mac-os-x.html#disqus_thread"
             data-disqus-identifier="http://douxinchun.github.io/blog/20180718/generate-rsa-key-on-mac-os-x.html">Comments</a>
        
		<!--
	    
		-->
      </p>
    
  </header>


  <div class="entry-content"><p>Mac自带OpenSSL,可以利用openssl来生成RSA密钥对</p>

<p>1.生成私钥,1024指密钥的长度</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  <span class="nb">test </span>openssl genrsa -out private_key.pem 1024
</span><span class='line'>Generating RSA private key, <span class="m">1024</span> bit long modulus
</span><span class='line'>.......................................................................++++++
</span><span class='line'>.......................................................................++++++
</span><span class='line'>e is <span class="m">65537</span> <span class="o">(</span>0x10001<span class="o">)</span>
</span><span class='line'>➜  <span class="nb">test </span>cat private_key.pem
</span><span class='line'>-----BEGIN RSA PRIVATE KEY-----
</span><span class='line'>MIICXQIBAAKBgQDJrT1W3ZyBAYIMNb0XDBQTIGw4TpbrLelQ/K6Yl6abciAUAZNn
</span><span class='line'>j5EHlFhMvpe3iHU0xPIcTM0IM9ZnMjecikHC4lBJ0JmXEsHf4j6Cf2+KRFHTaxPP
</span><span class='line'>hqf65wiGvduTf70xOCvaPeyYVu4x69jm2rtxOeVvF1PJSrV+ZDCoDmYD3QIDAQAB
</span><span class='line'>AoGAToUwmJ13zZJ0u6RAlrSRLFE3UUTn5XDeojV/FNIWf/cTHjbu2SdAZB8Rse+S
</span><span class='line'>ylZKq9zyFqqgOU1VcKBQnpYFu9XFvpoP/xGC/T99MN3chBaQY4wY80FM8NEjWZbP
</span><span class='line'>ZPTczE/HypE+J14/0i0x6jujhFiAAmcE/1ivRzRGvo6qC9ECQQDmcki4jO4VTju7
</span><span class='line'>+WWINatj36pPn/JVUFH8Tqw98tQLg5VMPFfPNsl9L7CSqACCFvl1wiERuxfunRB0
</span><span class='line'>9dNHb4sHAkEA4ApECRgqo+/7Smd2WTa4hSQ+aYs6J7+9e8zjgfIuYBn5ONOsuIuV
</span><span class='line'>VntHyhSc2Xzbp1wkakCzTy/Tyw02kGCs+wJBAMFLHPpHo7AVRf9+yo48zjzgr99H
</span><span class='line'>/yFWVN54MvtnQjtCLKmcd97kSo+Jv+bTqlFz6dy/b7OKpiFMdzBTvdtOkWMCQQC6
</span><span class='line'>21ULUMCfopQv5kLq/ZzATw5O8PQ8Gstq6eQGiXrsZD1cjA9Oi/yt+HxTqwV2z5BT
</span><span class='line'>8aHdjMEAlp9Kh2au3DLpAkB+koitVpjxmWyzQ/Sl4Xa843oR+qneofZZ3m9johtn
</span><span class='line'>+7NQu3JXI1xBckxmZ4DtODtC7MUIqlOEej5OT9QVwljv
</span><span class='line'>-----END RSA PRIVATE KEY-----
</span></code></pre></td></tr></table></div></figure>


<p>2.生成公钥</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  <span class="nb">test </span>openssl rsa -in private_key.pem -pubout -out public_key.pem
</span><span class='line'>writing RSA key
</span><span class='line'>➜  <span class="nb">test </span>cat public_key.pem
</span><span class='line'>-----BEGIN PUBLIC KEY-----
</span><span class='line'>MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDJrT1W3ZyBAYIMNb0XDBQTIGw4
</span><span class='line'>TpbrLelQ/K6Yl6abciAUAZNnj5EHlFhMvpe3iHU0xPIcTM0IM9ZnMjecikHC4lBJ
</span><span class='line'>0JmXEsHf4j6Cf2+KRFHTaxPPhqf65wiGvduTf70xOCvaPeyYVu4x69jm2rtxOeVv
</span><span class='line'>F1PJSrV+ZDCoDmYD3QIDAQAB
</span><span class='line'>-----END PUBLIC KEY-----
</span></code></pre></td></tr></table></div></figure>


<p>3.使用pkcs8命令转换私钥格式 PKCS标准</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  <span class="nb">test </span>openssl pkcs8 -topk8 -inform PEM -in private_key.pem -outform PEM -nocrypt
</span><span class='line'>-----BEGIN PRIVATE KEY-----
</span><span class='line'>MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAMmtPVbdnIEBggw1
</span><span class='line'>vRcMFBMgbDhOlust6VD8rpiXpptyIBQBk2ePkQeUWEy+l7eIdTTE8hxMzQgz1mcy
</span><span class='line'>N5yKQcLiUEnQmZcSwd/iPoJ/b4pEUdNrE8+Gp/rnCIa925N/vTE4K9o97JhW7jHr
</span><span class='line'>2Obau3E55W8XU8lKtX5kMKgOZgPdAgMBAAECgYBOhTCYnXfNknS7pECWtJEsUTdR
</span><span class='line'>ROflcN6iNX8U0hZ/9xMeNu7ZJ0BkHxGx75LKVkqr3PIWqqA5TVVwoFCelgW71cW+
</span><span class='line'>mg//EYL9P30w3dyEFpBjjBjzQUzw0SNZls9k9NzMT8fKkT4nXj/SLTHqO6OEWIAC
</span><span class='line'>ZwT/WK9HNEa+jqoL0QJBAOZySLiM7hVOO7v5ZYg1q2Pfqk+f8lVQUfxOrD3y1AuD
</span><span class='line'>lUw8V882yX0vsJKoAIIW+XXCIRG7F+6dEHT100dviwcCQQDgCkQJGCqj7/tKZ3ZZ
</span><span class='line'>NriFJD5pizonv717zOOB8i5gGfk406y4i5VWe0fKFJzZfNunXCRqQLNPL9PLDTaQ
</span><span class='line'>YKz7AkEAwUsc+kejsBVF/37KjjzOPOCv30f/IVZU3ngy+2dCO0IsqZx33uRKj4m/
</span><span class='line'>5tOqUXPp3L9vs4qmIUx3MFO9206RYwJBALrbVQtQwJ+ilC/mQur9nMBPDk7w9Dwa
</span><span class='line'>y2rp5AaJeuxkPVyMD06L/K34fFOrBXbPkFPxod2MwQCWn0qHZq7cMukCQH6SiK1W
</span><span class='line'>mPGZbLND9KXhdrzjehH6qd6h9lneb2OiG2f7s1C7clcjXEFyTGZngO04O0LsxQiq
</span><span class='line'><span class="nv">U4R6Pk5P1BXCWO8</span><span class="o">=</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/20180713/debug-application-on-newer-ios-from-an-older-xcode.html">低版本Xcode调试高版本的iOS系统</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-07-13T17:10:45+08:00'><span class='date'>2018 年7 月13 日</span> <span class='time'>5:10 pm</span></time>
        
           | <a href="/blog/20180713/debug-application-on-newer-ios-from-an-older-xcode.html#disqus_thread"
             data-disqus-identifier="http://douxinchun.github.io/blog/20180713/debug-application-on-newer-ios-from-an-older-xcode.html">Comments</a>
        
		<!--
	    
		-->
      </p>
    
  </header>


  <div class="entry-content"><p>在使用Xcode作为iOS开发的主IDE的情况下,遇到这种情况最好是AppStore中安装最新版本的Xcode.</p>

<p>下面的方案只是一个临时debug的方案</p>

<h5>1.找到不支持的iOS版本,Xcode中可以使用快捷键: Cmd+Shift+2 ,下图表示不支持的版本是 iOS 12.0 (16A5318d)</h5>

<p><img src="http://p64xrfkn6.bkt.clouddn.com/blog_reference_image/2018/7/1-1.png" alt="Could not locate device support files" /></p>

<h5>2.Terminal cd 到Xcode DeviceSupport 目录下</h5>

<blockquote><p>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜ <span class="nb">cd</span> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport
</span><span class='line'>➜  DeviceSupport ls
</span><span class='line'>10.0         10.3         11.2         8.0          8.3          9.1
</span><span class='line'>10.1         11.0         11.3         8.1          8.4          9.2
</span><span class='line'>10.2         11.1         11.4 <span class="o">(</span>15F79<span class="o">)</span> 8.2          9.0          9.3
</span><span class='line'>➜  DeviceSupport
</span></code></pre></td></tr></table></div></figure>


<h5>3.Important 去网上搜索真机支持包,可以输出关键字&#8221;xcode 12.0 (16A5318d) 真机支持包&#8221;,一般情况下百度网盘中都会有,下载下来,copy到2的目录下,然后重启Xcode,搞定</h5>

<h5>4.不下载真机支持包的方案</h5>

<p>直接拷贝一个DeviceSupport现有的支持版本,重命名为 12.0 (16A5318d), 重启Xcode后搞定.<br/>
注意这里需要用到root权限,命令前加sudo即可.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  DeviceSupport sudo cp -rf 11.4<span class="se">\ \(</span>15F79<span class="se">\)</span> 12.0<span class="se">\ \(</span>16A5318d<span class="se">\)</span>
</span><span class='line'>Password:
</span><span class='line'>➜  DeviceSupport ls
</span><span class='line'>10.0            11.0            11.4 <span class="o">(</span>15F79<span class="o">)</span>    8.2             9.1
</span><span class='line'>10.1            11.1            12.0 <span class="o">(</span>16A5318d<span class="o">)</span> 8.3             9.2
</span><span class='line'>10.2            11.2            8.0             8.4             9.3
</span><span class='line'>10.3            11.3            8.1             9.0             xinchun
</span><span class='line'>➜  DeviceSupport
</span></code></pre></td></tr></table></div></figure>


<p><img src="http://p64xrfkn6.bkt.clouddn.com/blog_reference_image/2018/7/1-2.png" alt="success screenshot" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/20180516/xcodebuild-shi-yong-zhu-yi-shi-xiang.html">Xcodebuild 使用注意事项</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-05-16T11:17:34+08:00'><span class='date'>2018 年5 月16 日</span> <span class='time'>11:17 am</span></time>
        
           | <a href="/blog/20180516/xcodebuild-shi-yong-zhu-yi-shi-xiang.html#disqus_thread"
             data-disqus-identifier="http://douxinchun.github.io/blog/20180516/xcodebuild-shi-yong-zhu-yi-shi-xiang.html">Comments</a>
        
		<!--
	    
		-->
      </p>
    
  </header>


  <div class="entry-content"><h2>1.xcodebuild cocoapod CONFIGURATION_BUILD_DIR</h2>

<h3>现象</h3>

<figure class='code'><figcaption><span>xcodebuild命令用法示例</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>xcodebuild -sdk iphoneos -configuration <span class="k">${</span><span class="nv">BUILD_CONFIGURATION</span><span class="k">}</span> -derivedDataPath<span class="o">=</span><span class="s2">&quot;../build&quot;</span> -workspace <span class="s1">&#39;../SohuInk.xcworkspace&#39;</span> -scheme <span class="s1">&#39;SohuInk_Jenkins&#39;</span> -archivePath <span class="s2">&quot;../SohuInk_Jenkins.xcarchive&quot;</span> archive
</span></code></pre></td></tr></table></div></figure>


<p>如果项目中使用了cocoapod并且xcodebuild 命令参数中指定了CONFIGURATION_BUILD_DIR并且值为相对路径,此时在Xcode Tools Version 5.0下的xcodebuild构建会报如下错误:</p>

<figure class='code'><figcaption><span>error_info</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ld: warning: directory not found <span class="k">for</span> option <span class="s1">&#39;-L/XXXX/XXXX/pop&#39;</span>
</span><span class='line'>ld: library not found <span class="k">for</span> -lAFNetworking
</span><span class='line'>clang: error: linker <span class="nb">command </span>failed with <span class="nb">exit </span>code <span class="m">1</span> <span class="o">(</span>use -v to see invocation<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>** ARCHIVE FAILED **
</span><span class='line'>
</span><span class='line'>The following build commands failed:
</span><span class='line'>  Ld /Users/XXXX/XXXX/Objects-normal/arm64/SohuInk normal arm64
</span><span class='line'>  Ld /Users/XXXX/XXXX normal armv7
</span><span class='line'><span class="o">(</span><span class="m">2</span> failures<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h3>解决方案</h3>

<h4>方案1,不好用</h4>

<p>Xcode Tools version 5.0 支持参数 derivedDataPath 可以放弃CONFIGURATION_BUILD_DIR配置指定该参数,我实际操作是发现使用相对路径的情况下,虽然可以archive success,但是build的目录没有改变,依然在xcode默认的derivedData目录下.</p>

<h4>方案2,OK</h4>

<p>CONFIGURATION_BUILD_DIR的值指定为绝对路径,一切OK,可成功archive.</p>

<h3>结论</h3>

<blockquote><p>xcodebuild中的CONFIGURATION_BUILD_DIR值需要使用绝对路径</p></blockquote>

<h2>参考链接</h2>

<p><a href="https://stackoverflow.com/questions/11965040/xcodebuilding-a-workspace-and-setting-a-custom-build-path/12259098#12259098">Stackoverflow上关于使用xcodebuild CONFIGURATION_BUILD_DIR最好使用绝对路径的说明 @Chilloutman</a><br/>
<a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html">https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/20180501/mac-terminal-shortcut-keys.html">Mac Terminal 快捷键记录</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-05-01T18:16:04+08:00'><span class='date'>2018 年5 月1 日</span> <span class='time'>6:16 pm</span></time>
        
           | <a href="/blog/20180501/mac-terminal-shortcut-keys.html#disqus_thread"
             data-disqus-identifier="http://douxinchun.github.io/blog/20180501/mac-terminal-shortcut-keys.html">Comments</a>
        
		<!--
	    
		-->
      </p>
    
  </header>


  <div class="entry-content"><p>Mac 命令行编辑快捷键的方法，对Mac的应用有所帮助。</p>

<h3>Mac 命令行命令</h3>

<table>
<thead>
<tr>
<th>Command      </th>
<th> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>history      </td>
<td> 显示命令历史列表</td>
</tr>
<tr>
<td>↑(Ctrl+p)    </td>
<td> 显示上一条命令</td>
</tr>
<tr>
<td>↓(Ctrl+n)    </td>
<td> 显示下一条命令</td>
</tr>
<tr>
<td>clear        </td>
<td> 清除 shell 提示屏幕</td>
</tr>
<tr>
<td>exit         </td>
<td> 注销</td>
</tr>
<tr>
<td>history      </td>
<td> 显示命令历史</td>
</tr>
<tr>
<td>reset        </td>
<td> 刷新 shell 提示屏幕</td>
</tr>
</tbody>
</table>


<p><br /></p>

<h3>Mac 命令行编辑快捷键</h3>

<table>
<thead>
<tr>
<th>Command      </th>
<th> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>↑(Ctrl+p)    </td>
<td> 显示上一条命令</td>
</tr>
<tr>
<td>↓(Ctrl+n)    </td>
<td> 显示下一条命令</td>
</tr>
<tr>
<td>!num         </td>
<td> 执行命令历史列表的第num条命令</td>
</tr>
<tr>
<td>!!           </td>
<td> 执行上一条命令</td>
</tr>
<tr>
<td>!?string?    </td>
<td> 执行含有string字符串的最新命令</td>
</tr>
<tr>
<td>Ctrl+r       </td>
<td> 然后输入若干字符，开始向上搜索包含该字符的命令，继续按  Ctrl+r，搜索上一条匹配的命令</td>
</tr>
<tr>
<td>Ctrl+s       </td>
<td> 与Ctrl+r类似,只是正向检索</td>
</tr>
<tr>
<td>→(Ctrl+f)    </td>
<td> 光标向前移动一个字符,相当与-></td>
</tr>
<tr>
<td>←(Ctrl+b)    </td>
<td> 光标向后移动一个字符,相当与&lt;-</td>
</tr>
<tr>
<td>opt+←        </td>
<td> 光标向前移动一个单词</td>
</tr>
<tr>
<td>opt+→        </td>
<td> 光标向后移动一个单词</td>
</tr>
<tr>
<td>ls !$        </td>
<td> 执行命令ls，并以上一条命令的参数为其参数</td>
</tr>
<tr>
<td>Ctrl+a       </td>
<td> 移动到当前行的开头</td>
</tr>
<tr>
<td>Ctrl+e       </td>
<td> 移动到当前行的结尾</td>
</tr>
<tr>
<td>Esc+b        </td>
<td> 移动到当前单词的开头</td>
</tr>
<tr>
<td>Esc+f        </td>
<td> 移动到当前单词的结尾</td>
</tr>
<tr>
<td>Ctrl+l       </td>
<td> 清屏</td>
</tr>
<tr>
<td>Ctrl+u       </td>
<td> 剪切命令行中光标所在处之前的所有字符（不包括自身）</td>
</tr>
<tr>
<td>Ctrl+k       </td>
<td> 剪切命令行中光标所在处之后的所有字符（包括自身）</td>
</tr>
<tr>
<td>Ctrl+d       </td>
<td> 删除光标所在处字符</td>
</tr>
<tr>
<td>Ctrl+h       </td>
<td> 删除光标所在处前一个字符</td>
</tr>
<tr>
<td>Ctrl+y       </td>
<td> 粘贴刚才所删除的字符</td>
</tr>
<tr>
<td>Ctrl+w       </td>
<td> 剪切光标所在处之前的一个词（以空格、标点等为分隔符）</td>
</tr>
<tr>
<td>Ctrl+t       </td>
<td> 颠倒光标所在处及其之前的字符位置，并将光标移动到下一个字符</td>
</tr>
<tr>
<td>Ctrl+v       </td>
<td> 插入特殊字符,如Ctrl+v+Tab加入Tab字符键 ,先按下Ctrl+V,抬起后再按下Tab</td>
</tr>
<tr>
<td>Esc+t        </td>
<td> 颠倒光标所在处及其相邻单词的位置</td>
</tr>
<tr>
<td>Ctrl+c       </td>
<td> 删除整行</td>
</tr>
<tr>
<td>Ctrl+(x u)   </td>
<td> 按住Ctrl的同时再先后按x和u，撤销刚才的操作</td>
</tr>
<tr>
<td>Ctrl+s       </td>
<td> 挂起当前shell</td>
</tr>
<tr>
<td>Ctrl+q       </td>
<td> 重新启用挂起的shell</td>
</tr>
</tbody>
</table>


<p><br /></p>

<h3>下面的应用可能稍稍高级一点点</h3>

<table>
<thead>
<tr>
<th>Command                 </th>
<th> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td># !!                   </td>
<td> 上一条命令</td>
</tr>
<tr>
<td># !-n                  </td>
<td> 倒数第N条历史命令</td>
</tr>
<tr>
<td># !-n:p                </td>
<td> 打印上一条命令（不执行）</td>
</tr>
<tr>
<td># !?string?            </td>
<td> 最新一条含有“string”的命令</td>
</tr>
<tr>
<td># !-n:gs/str1/str2/    </td>
<td> 将倒数第N条命令的str1替换为str2，并执行（若不加g,则仅替换第一个)</td>
</tr>
</tbody>
</table>


<h3>参考</h3>

<p><a href="http://notes.11ten.net/mac-command-line-editing-commonly-used-shortcut-keys.html">http://notes.11ten.net/mac-command-line-editing-commonly-used-shortcut-keys.html</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/20180430/git-command-shi-yong-shou-ji.html">Git Commands 使用手记</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-04-30T17:44:10+08:00'><span class='date'>2018 年4 月30 日</span> <span class='time'>5:44 pm</span></time>
        
           | <a href="/blog/20180430/git-command-shi-yong-shou-ji.html#disqus_thread"
             data-disqus-identifier="http://douxinchun.github.io/blog/20180430/git-command-shi-yong-shou-ji.html">Comments</a>
        
		<!--
	    
		-->
      </p>
    
  </header>


  <div class="entry-content"><p>本文主要用来记录自己在使用Git的过程遇到的一些问题及解决方案.</p>

<h2>1.Git push error: dst refspec dev_1.0 matches more than one.</h2>

<h3>导火索</h3>

<p>  Git 删除远程库中的一个分支的时候报错,如下:</p>

<pre><code class="``">  git push origin --delete dev_1.0
  error: dst refspec dev_1.0 matches more than one.
  error: failed to push some refs to 'git@xxxxx:xxx/xxx.git'
</code></pre>

<p>  出现这个错误的原因是在于远程Git服务器上名称为dev_1.0的有两个对象：一个是tag，一个是branch；在执行 git push origin &ndash;delete dev_1.0这个命令时Git服务器不知道要删除哪个。</p>

<h3>解决办法</h3>

<p>删除名称为dev_1.0的branch：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git push origin :refs/heads/dev_1.0</span></code></pre></td></tr></table></div></figure>


<p>
删除名称为dev_1.0的tag:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git push origin :refs/tags/dev_1.0</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/20171202/get-mobileprovison-uuid.html">获取mobileprovision文件的UUID</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-12-02T13:06:26+08:00'><span class='date'>2017 年12 月2 日</span> <span class='time'>1:06 pm</span></time>
        
           | <a href="/blog/20171202/get-mobileprovison-uuid.html#disqus_thread"
             data-disqus-identifier="http://douxinchun.github.io/blog/20171202/get-mobileprovison-uuid.html">Comments</a>
        
		<!--
	    
		-->
      </p>
    
  </header>


  <div class="entry-content"><hr />

<h3>Provision Profile 文件在Mac OS中的默认存放位置:</h3>

<blockquote><p>~/Library/MobileDevice/Provisioning Profiles</p></blockquote>

<h3>1.通过GUI的工具查看:</h3>

<p>iPhone配置实用工具</p>

<h3>2.命令行工具</h3>

<p><a href="https://github.com/0xc010d/mobileprovision-read">0xc010d/mobileprovision-read</a><br/>
安装方法<br/>
在 Terminal中键入下面的命令并回车</p>

<figure class='code'><figcaption><span>Terminal</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl https://raw.githubusercontent.com/0xc010d/mobileprovision-read/master/main.m <span class="p">|</span> clang -framework Foundation -framework Security -o /usr/local/bin/mobileprovision-read -x objective-c -
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h4>mobileprovision-read 命令介绍</h4>

<figure class='code'><figcaption><span>Terminal  </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  ~ mobileprovision-read
</span><span class='line'>mobileprovision-read -- mobileprovision files querying tool.
</span><span class='line'>
</span><span class='line'>USAGE
</span><span class='line'>mobileprovision-read -f fileName <span class="o">[</span>-o option<span class="o">]</span>
</span><span class='line'>
</span><span class='line'>OPTIONS
</span><span class='line'>    <span class="nb">type</span> – prints mobileprovision profile <span class="nb">type</span> <span class="o">(</span>debug, ad-hoc, enterprise, appstore<span class="o">)</span>
</span><span class='line'>    appid – prints application identifier
</span><span class='line'>Will print raw provision<span class="s1">&#39;s plist if option is not specified.</span>
</span><span class='line'><span class="s1">You can also use key path as an option.</span>
</span><span class='line'>
</span><span class='line'><span class="s1">EXAMPLES</span>
</span><span class='line'><span class="s1">mobileprovision-read -f test.mobileprovision -o type</span>
</span><span class='line'><span class="s1">    Prints profile type</span>
</span><span class='line'>
</span><span class='line'><span class="s1">mobileprovision-read -f test.mobileprovision -o UUID</span>
</span><span class='line'><span class="s1">    Prints profile UUID</span>
</span><span class='line'>
</span><span class='line'><span class="s1">mobileprovision-read -f test.mobileprovision -o ProvisionedDevices</span>
</span><span class='line'><span class="s1">    Prints provisioned devices UDIDs</span>
</span><span class='line'>
</span><span class='line'><span class="s1">mobileprovision-read -f test.mobileprovision -o Entitlements.get-task-allow</span>
</span><span class='line'><span class="s1">    Prints 0 if profile doesn&#39;</span>t allow debugging <span class="m">1</span> otherwise
</span><span class='line'>➜  ~
</span></code></pre></td></tr></table></div></figure>


<p>
eg:<br/>
mobileprovision-read -f &ldquo;filepath&rdquo; -o UUID  -> 打印输出mobileprovision的UUID<br/>
mobileprovision-read -f &ldquo;provisoning-profile-file-path&rdquo; -o ProvisionedDevices  -> 列出描述文件所包含的device UUID列表</p>

<h3>3.自定义脚本</h3>

<p>使用了苹果的security和PlistBuddy工具.<br/>
<a href="https://github.com/douxinchun/MyBackupForMacOSX/blob/master/shell/mobilapp.sh">mobileapp.sh</a><br/>
使用方法:<br/>
./mobileapp.sh &ldquo;provisoning-profile-file-path&rdquo;<br/>
注意,如果filepath中含有空格,请将filepath加上双引号.</p>

<p>eg:</p>

<figure class='code'><figcaption><span>Terminal</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>➜  Desktop ./mobilepp.sh <span class="s2">&quot;/Users/newspring/Library/MobileDevice/Provisioning Profiles/1213b96b-4ac1-4365-ae45-350eb6beadf2.mobileprovision&quot;</span>
</span><span class='line'>security: SecPolicySetValue: One or more parameters passed to a <span class="k">function</span> were not valid.
</span><span class='line'>UUID is:
</span><span class='line'>1213b96b-4ac1-4365-ae45-350eb6beadf2
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h3>参考链接</h3>

<p><a href="https://my.oschina.net/ioslighter/blog/494342">https://my.oschina.net/ioslighter/blog/494342</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/20170529/install-macos-by-u-disk.html">Install macOS by U Disk</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-05-29T16:46:55+08:00'><span class='date'>2017 年5 月29 日</span> <span class='time'>4:46 pm</span></time>
        
           | <a href="/blog/20170529/install-macos-by-u-disk.html#disqus_thread"
             data-disqus-identifier="http://douxinchun.github.io/blog/20170529/install-macos-by-u-disk.html">Comments</a>
        
		<!--
	    
		-->
      </p>
    
  </header>


  <div class="entry-content"><p>动手之前,TimeMachine备份数据!<br/>
动手之前,TimeMachine备份数据!<br/>
动手之前,TimeMachine备份数据!</p>

<ul>
<li>1.8GB或者更大容量的U盘,Apple建议不小于12G</li>
<li>2.使用 应用程序&ndash;>实用工具&ndash;>磁盘工具 格盘 (参考图片 格盘)

<ul>
<li> 名称 Sierra 使用其它名称注意在后面的Terminal命令中作出替换</li>
<li> 格式 Mac OS 扩展 (日志式)</li>
<li> 方案 GUID 分区图</li>
</ul>
</li>
<li>3.AppStore中下载Sierra系统.下载耗时较长,可以冲杯咖啡,休息一下去了.(参照图片 原版安装包)</li>
<li>4.使用Terminal(应用程序→实用工具→终端),输入命令<br/>
<code>
sudo /Applications/Install\ macOS\ Sierra.app/Contents/Resources/createinstallmedia --volume /Volumes/Sierra --applicationpath /Applications/Install\ macOS\ Sierra.app --nointeraction
</code>
耐心等待,直至出现Done.启动U盘制作结束.</li>
<li>5.重新启动PC,按照Option不放,直到出现启动菜单选项.
<img src="/blog_reference_image/2017/7/mac_option_boot.jpg" alt="启动菜单项" /></li>
</ul>


<h3>附几张网络图片,仅供参考</h3>

<p>格盘<br/>
<img src="/blog_reference_image/2017/7/disk_ulitily.jpg" alt="U盘格盘" />
原版安装包<br/>
<img src="http://upload-images.jianshu.io/upload_images/3704217-1629bb87e7f7945e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="原版安装包" />
步骤4,参考图
<img src="/blog_reference_image/2017/7/terminal.jpg" alt="terminal-createinstallmedia" /></p>

<h3>参考资料</h3>

<p><a href="https://support.apple.com/zh-cn/HT201372">创建可引导的macOS安装器,https://support.apple.com/zh-cn/HT201372</a><br/>
<a href="http://www.iplaysoft.com/macos-usb-install-drive.html">iPlaySoft简单制作 macOS Sierra 正式版U盘USB启动安装盘方法教程</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1><a href="/aboutme" >About Me</a></h1>
  <img src="/images/head.png" width=200 height=200 style="border-radius:5%" /><br />
  <b>Spring, 程序员</b>
  <p>博观而约取, 厚积而薄发</p>
</section>
<section>
  <h1>最近发布</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/20180918/tips-of-xcode.html">Xcode 使用技巧</a>
      </li>
    
      <li class="post">
        <a href="/blog/20180725/introduction-to-lipo.html">Lipo 使用简介</a>
      </li>
    
      <li class="post">
        <a href="/blog/20180718/rsa-key-structuress.html">秘钥格式 证书</a>
      </li>
    
      <li class="post">
        <a href="/blog/20180718/generate-rsa-key-on-mac-os-x.html">Mac OS X 下生成RSA密钥对</a>
      </li>
    
      <li class="post">
        <a href="/blog/20180713/debug-application-on-newer-ios-from-an-older-xcode.html">低版本Xcode调试高版本的iOS系统</a>
      </li>
    
  </ul>
</section>




<section>
  <h1>文章分类</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/css/'>css (1)</a></li>
<li class='category'><a href='/blog/categories/der/'>der (1)</a></li>
<li class='category'><a href='/blog/categories/git/'>git (1)</a></li>
<li class='category'><a href='/blog/categories/goagent/'>goagent (1)</a></li>
<li class='category'><a href='/blog/categories/ios/'>ios (9)</a></li>
<li class='category'><a href='/blog/categories/ioskai-fa-guo-cheng-zhong-yu-dao-de-keng/'>ios开发过程中遇到的坑 (1)</a></li>
<li class='category'><a href='/blog/categories/linux/'>linux (1)</a></li>
<li class='category'><a href='/blog/categories/lipo/'>lipo (1)</a></li>
<li class='category'><a href='/blog/categories/mac/'>mac (1)</a></li>
<li class='category'><a href='/blog/categories/mac-os-x/'>mac os x (2)</a></li>
<li class='category'><a href='/blog/categories/macbook-pro/'>macbook pro (1)</a></li>
<li class='category'><a href='/blog/categories/macos/'>macos (1)</a></li>
<li class='category'><a href='/blog/categories/objective-c/'>objective_c (1)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (6)</a></li>
<li class='category'><a href='/blog/categories/openssl/'>openssl (1)</a></li>
<li class='category'><a href='/blog/categories/pem/'>pem (1)</a></li>
<li class='category'><a href='/blog/categories/provisioning-profile/'>provisioning profile (1)</a></li>
<li class='category'><a href='/blog/categories/rsa/'>rsa (2)</a></li>
<li class='category'><a href='/blog/categories/ssd/'>ssd (1)</a></li>
<li class='category'><a href='/blog/categories/static-library/'>static library (1)</a></li>
<li class='category'><a href='/blog/categories/terminal/'>terminal (3)</a></li>
<li class='category'><a href='/blog/categories/xcode/'>xcode (7)</a></li>
<li class='category'><a href='/blog/categories/xcodebuild/'>xcodebuild (1)</a></li>
<li class='category'><a href='/blog/categories/bing-yu-huo-zhi-ge/'>冰与火之歌 (1)</a></li>

  </ul>
</section><section>
  <h1>近期评论</h1>
  <script type="text/javascript" src="http://newspringblog.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=32&excerpt_length=20"></script><a href="http://disqus.com/">Powered by Disqus</a>
  
</section>
<section>
<h1>访客地图</h1>
<script type="text/javascript" src="//ra.revolvermaps.com/0/0/6.js?i=0qld21p02br&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=0" async="async"></script>
</section>
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - Spring -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'newspringblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











  <script type="text/javascript" src="http://arrow.scrolltotop.com/arrow78.js"></script>
<noscript>Not seeing a <a href="http://www.scrolltotop.com/">Scroll to Top Button</a>? Go to our FAQ page for more info.</noscript>

</body>
</html>
